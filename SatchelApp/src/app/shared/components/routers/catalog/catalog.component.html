<app-header></app-header>

<div (click)="togglePriceFilter()" class="settings-bar"> 
  <p *ngIf="priceRangeStep === 0" class="">Сортировка</p>
  <img *ngIf="priceRangeStep === 1" class="settings__image" src="../../../../../assets/images/icons/arrow-down.svg" alt="">
  <img *ngIf="priceRangeStep === 2" class="settings__image" src="../../../../../assets/images/icons/arrow-up.svg" alt="">
</div>

<div class="container">

  <div class="optional-menu">
    <input class="optional__search" [(ngModel)]="filters.filterByName" placeholder="Найти" type="text">

    <div class="price-filter">
      <p class="filter-heading">Cортировать по цене:</p>
      <input class="optional__price left" [(ngModel)]="filters.filterByMinPrice" placeholder="Цена от" type="number">
      <input class="optional__price" [(ngModel)]="filters.filterByMaxPrice" placeholder="Цена до" type="number">
    </div>

    <div class="sex-filter__container">
      <p class="filter-heading">Сортировать по полу:</p>
      <ul class="sex-filter">
        <li [class.selected]= "genderType[0] === selectedGender" class="sex-filter__item" (click)="toggleGenderFilter(genderType[0])">Мужской</li>
        <li [class.selected]= "genderType[1] === selectedGender" class="sex-filter__item" (click)="toggleGenderFilter(genderType[1])">Женский</li> 
        <li [class.selected]= "genderType[2] === selectedGender" class="sex-filter__item" (click)="toggleGenderFilter(genderType[2])">Унисекс</li>
      </ul>
    </div>

    <div class="optional-menu__btnGroup">
      <button class="optional-menu__btn" (click)="clearFilters()">Очистить фильтры</button>
    
      <button class="optional-menu__btn" (click)="updateProducts()">Применить фильтры</button>
    </div>
  </div>

  <section class="product__section">
    <div class="product" *ngFor="let product of products">
      <img class="star" (click)="toggleFavourite(product, star)" [src]="isFavourite(product) ? getActiveStarPath() : getInactiveStarPath()" #star>
      
      <div class="product-image">
        <app-carousel [images]="product.images"></app-carousel>
      </div>
      <div class="product-description" (click)="goToProduct(product.productId)">
        <h2 class="product-name">{{product.name}}</h2>
        <p class="product-price">{{getFormatPrice(product.price)}}</p>
      </div>
    </div>
  </section>

</div>
<app-footer></app-footer>
