{"ast":null,"code":"import { __decorate } from \"tslib\";\nimport { Component } from '@angular/core';\nexport let CatalogComponent = class CatalogComponent {\n  constructor(router, productService, favouriteService, userService, route, registrationService) {\n    this.router = router;\n    this.productService = productService;\n    this.favouriteService = favouriteService;\n    this.userService = userService;\n    this.route = route;\n    this.registrationService = registrationService;\n    this.products = [];\n    this.filters = {};\n    this.productType = '';\n    this.selectedGender = null;\n    this.genderType = [1, 2, 3];\n    this.inactiveStar = '../../../../../assets/images/icons/favourites.svg';\n    this.activeStar = '../../../../../assets/images/icons/activeFavourite.svg';\n    this.starStatus = this.inactiveStar;\n  }\n  ngOnInit() {\n    this.route.params.subscribe(params => {\n      this.productType = params['item'];\n      this.productService.getAllProducts(this.productType).subscribe(productsFromQuery => {\n        this.products = productsFromQuery;\n      }, error => {\n        console.error('Error fetching products', error);\n      });\n    });\n  }\n  addToFavourite(product, star) {\n    if (!this.userService.isAuthorized) {\n      this.registrationService.setAuthWindowStatus();\n      return;\n    }\n    if (star.src.includes('activeFavourite')) {\n      star.src = this.inactiveStar;\n      this.favouriteService.DeleteProductFromFavourites(product.productId, this.userService.userId);\n    } else {\n      star.src = this.activeStar;\n      this.favouriteService.AddFavouriteProduct(product.productId, this.userService.userId);\n    }\n  }\n  onGenderClick(gender) {\n    if (gender === this.selectedGender) {\n      this.selectedGender = 0;\n      delete this.filters.filterByGender;\n    } else {\n      this.selectedGender = gender;\n      this.filters.filterByGender = this.selectedGender;\n    }\n  }\n  clearFilters() {\n    this.selectedGender = 0;\n    this.filters = {};\n    this.getFilteredProducts();\n  }\n  getFilteredProducts() {\n    this.productService.getFilteredProducts(this.filters, this.productType).subscribe(productsFromQuery => {\n      this.products = productsFromQuery;\n    }, error => {\n      console.error('Error fetching products', error);\n    });\n  }\n  goToProduct(id) {\n    this.router.navigate(['catalog/product', id]);\n  }\n  getFormatPrice(price) {\n    return this.productService.getFormattedPrice(price);\n  }\n};\nCatalogComponent = __decorate([Component({\n  selector: 'app-catalog',\n  templateUrl: './catalog.component.html',\n  styleUrls: ['./catalog.component.css']\n})], CatalogComponent);","map":{"version":3,"names":["Component","CatalogComponent","constructor","router","productService","favouriteService","userService","route","registrationService","products","filters","productType","selectedGender","genderType","inactiveStar","activeStar","starStatus","ngOnInit","params","subscribe","getAllProducts","productsFromQuery","error","console","addToFavourite","product","star","isAuthorized","setAuthWindowStatus","src","includes","DeleteProductFromFavourites","productId","userId","AddFavouriteProduct","onGenderClick","gender","filterByGender","clearFilters","getFilteredProducts","goToProduct","id","navigate","getFormatPrice","price","getFormattedPrice","__decorate","selector","templateUrl","styleUrls"],"sources":["C:\\Satchel\\SatchelApp\\src\\app\\shared\\components\\routers\\catalog\\catalog.component.ts"],"sourcesContent":["import { Component, Input, OnInit} from '@angular/core';\r\nimport { Router, ActivatedRoute } from '@angular/router';\r\nimport { ProductService } from 'src/app/core/services/product.service';\r\nimport { FavouriteService } from 'src/app/core/services/favourite.service';\r\nimport { UserService } from 'src/app/core/services/user.service';\r\nimport { AuthorizationService } from 'src/app/core/services/authorization.service';\r\n\r\nexport interface Product{\r\n  productId: number,\r\n  name: string,\r\n  description: string,\r\n  producrCategoryId: number,\r\n  productTypeId: number,\r\n  price: number,\r\n  images: string[],\r\n  sizes: string[]\r\n  brandTypeId: number,\r\n  genderTypeId: number\r\n}\r\n\r\nexport interface Filters{\r\n  filterByMinPrice?: number, \r\n  filterByMaxPrice?: number, \r\n  filterByGender?: number, \r\n  filterByName?: string, \r\n  isFilterByDecreasePrice?: boolean, \r\n  isFilterByIncreasePrice?: boolean\r\n}\r\n\r\n@Component({\r\n  selector: 'app-catalog',\r\n  templateUrl: './catalog.component.html',\r\n  styleUrls: ['./catalog.component.css']\r\n})\r\nexport class CatalogComponent implements OnInit{\r\n\r\n  constructor(private router: Router, \r\n              private productService: ProductService, \r\n              private favouriteService: FavouriteService, \r\n              private userService: UserService, \r\n              private route: ActivatedRoute,\r\n              private registrationService: regist) { }\r\n\r\n  products: Product[] = [];\r\n  filters: Filters = {} ;\r\n  productType: string = '';\r\n  selectedGender: number | null = null;\r\n  genderType = [1, 2 ,3]\r\n  \r\n  inactiveStar = '../../../../../assets/images/icons/favourites.svg'\r\n  activeStar = '../../../../../assets/images/icons/activeFavourite.svg'\r\n  starStatus = this.inactiveStar;\r\n\r\n  ngOnInit() {\r\n\r\n    this.route.params.subscribe(params => {\r\n      this.productType = params['item'];\r\n      this.productService.getAllProducts(this.productType).subscribe(\r\n        (productsFromQuery: Product[]) => {\r\n          this.products = productsFromQuery;\r\n        },\r\n        (error) => {\r\n          console.error('Error fetching products', error);\r\n        }\r\n      );\r\n    });\r\n  }\r\n\r\n  public addToFavourite(product: Product, star: HTMLImageElement) {\r\n    if(!this.userService.isAuthorized){\r\n      this.registrationService.setAuthWindowStatus();\r\n      return;\r\n    }\r\n      \r\n    \r\n    if(star.src.includes('activeFavourite')){\r\n      star.src = this.inactiveStar;\r\n      this.favouriteService.DeleteProductFromFavourites(product.productId, this.userService.userId);\r\n    }\r\n    else {\r\n      star.src = this.activeStar;\r\n      this.favouriteService.AddFavouriteProduct(product.productId, this.userService.userId);\r\n    }\r\n  }\r\n\r\n  onGenderClick(gender: number) {\r\n    if (gender === this.selectedGender) {\r\n      this.selectedGender = 0;\r\n      delete this.filters.filterByGender\r\n\r\n    } else {\r\n      this.selectedGender = gender;\r\n      this.filters.filterByGender = this.selectedGender\r\n    }\r\n  }\r\n\r\n  clearFilters(){\r\n    this.selectedGender = 0\r\n    this.filters = {}\r\n    this.getFilteredProducts()\r\n  }\r\n\r\n  getFilteredProducts(){\r\n\r\n    this.productService.getFilteredProducts(this.filters, this.productType).subscribe(\r\n      (productsFromQuery: Product[]) => {\r\n        this.products = productsFromQuery;\r\n      },\r\n      (error) => {\r\n        console.error('Error fetching products', error);\r\n      }\r\n    );\r\n  }\r\n\r\n  goToProduct(id: number) {\r\n    this.router.navigate(['catalog/product', id]);\r\n  }\r\n\r\n  getFormatPrice(price: number){\r\n    return (this.productService.getFormattedPrice(price))\r\n  }\r\n\r\n}\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}